<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>YouTube Downloader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
    .card { max-width: 720px; margin: 0 auto; padding: 1.5rem; border: 1px solid #eee; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.05); }
    .row { display: flex; gap: 1rem; flex-wrap: wrap; }
    label { font-weight: 600; margin-top: .75rem; display: block; }
    input[type="text"], select {
      width: 100%; padding: .75rem 1rem; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem;
    }
    button {
      padding: .8rem 1.2rem; border: none; border-radius: 10px; font-size: 1rem; cursor: pointer;
      background: black; color: white; margin-top: 1rem;
    }
    .flash { color: #b00020; margin: .5rem 0; }
    small { color: #666; }
    .muted { color: #666; }
  </style>
</head>
<body>
  <div class="card">
    <h1>YouTube Downloader</h1>
    <p class="muted">Paste a YouTube URL, choose <b>Video</b> (MP4) or <b>Audio-only</b> (M4A/WEBM), then download.</p>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div>
          {% for message in messages %}
            <div class="flash">• {{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST">
      <label for="url">YouTube URL</label>
      <input type="text" id="url" name="url" placeholder="https://www.youtube.com/watch?v=..." required />

      <div class="row">
        <div style="flex:1; min-width: 200px;">
          <label for="mode">Download Type</label>
          <select id="mode" name="mode">
            <option value="video">Video (MP4)</option>
            <option value="audio">Audio-only (M4A/WEBM)</option>
          </select>
          <small>Audio-only is much smaller and avoids large-file errors.</small>
        </div>

        <div style="flex:1; min-width: 200px;">
          <label for="resolution">Target Resolution (Video only)</label>
          <select id="resolution" name="resolution">
            {% for r in allowed_res %}
              <option value="{{ r }}">{{ r|upper }}</option>
            {% endfor %}
          </select>
          <small>We’ll pick this or the next best available stream.</small>
        </div>
      </div>

      <button type="submit">Download</button>
      <div><small>Tip: Very large files (> ~100MB) may fail on free hosting. Try lower resolution or audio-only.</small></div>
    </form>
  </div>
</body>
</html>
